{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/home/adrien/Documents/web_dev/REACT/mern_memories/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,Typography,Toolbar,Avatar,Button}from'@material-ui/core';import{Link}from'react-router-dom';import{useDispatch}from'react-redux';import{useHistory,useLocation}from'react-router-dom';import decode from'jwt-decode';import useStyles from'./styles';import memoriesLogo from'../../assets/memories-Logo.png';import memoriesText from'../../assets/memories-Text.png';import{LOGOUT}from'../../constants/actionTypes';var Navbar=function Navbar(){var classes=useStyles();var history=useHistory();var location=useLocation();var dispatch=useDispatch();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var logout=function logout(){dispatch({type:LOGOUT});history.push('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime()){logout();}}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{src:memoriesText,alt:\"memories text\",height:\"45px\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memoriesLogo,alt:\"memories logo\",height:\"40px\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl,children:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user.result.name}),/*#__PURE__*/_jsx(Button,{className:classes.logout,variant:\"contained\",color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]})});};export default Navbar;","map":{"version":3,"sources":["/home/adrien/Documents/web_dev/REACT/mern_memories/client/src/components/Navbar/Navbar.jsx"],"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","Link","useDispatch","useHistory","useLocation","decode","useStyles","memoriesLogo","memoriesText","LOGOUT","Navbar","classes","history","location","dispatch","JSON","parse","localStorage","getItem","user","setUser","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","image","toolbar","profile","purple","result","name","imageUrl","charAt","userName"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { AppBar, Typography, Toolbar, Avatar, Button } from '@material-ui/core';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport decode from 'jwt-decode';\n\nimport useStyles from './styles';\nimport memoriesLogo from '../../assets/memories-Logo.png';\nimport memoriesText from '../../assets/memories-Text.png';\nimport { LOGOUT } from '../../constants/actionTypes';\n\nconst Navbar = () => {\n    const classes = useStyles();\n    const history = useHistory();\n    const location = useLocation();\n    const dispatch = useDispatch();\n\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n    \n\n    const logout = () => {\n        dispatch({ type: LOGOUT });\n        history.push('/auth');\n        setUser(null);\n    };\n\n    useEffect(() => {\n        \n        const token = user?.token;\n        \n        if(token) {\n            const decodedToken = decode(token);\n            if(decodedToken.exp * 1000 < new Date().getTime()) {\n                logout();\n            }\n        }\n        setUser(JSON.parse(localStorage.getItem('profile')));\n    }, [location]);\n\n    return (\n        <>\n            <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n                <Link to=\"/\" className={classes.brandContainer}>\n                    <img src={memoriesText} alt=\"memories text\" height=\"45px\" />\n                    <img className={classes.image} src={memoriesLogo} alt=\"memories logo\" height=\"40px\" />\n                </Link>\n                <Toolbar className={classes.toolbar}>\n                    {user ? (\n                        <div className={classes.profile}>\n                            <Avatar className={classes.purple} alt={user.result.name} src={user.result.imageUrl}>{user.result.name.charAt(0)}</Avatar>\n                            <Typography className={classes.userName} variant=\"h6\">{user.result.name}</Typography>\n                            <Button className={classes.logout} variant=\"contained\" color=\"secondary\" onClick={logout}>Logout</Button>\n                        </div>\n                    ): (\n                        <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\n                    )}\n            </Toolbar>\n            </AppBar>\n        </>\n    )\n}\n\nexport default Navbar\n"]},"metadata":{},"sourceType":"module"}